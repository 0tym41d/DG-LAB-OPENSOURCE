# DG-LAB 开源
DG-LAB设备在全球范围得到广大朋友的认可与喜爱.很多朋友们希望我们的设备可以参与到更多的场景中去,为此我们将DG-LAB 具有代表性的设备蓝牙协议以开源的形式分享出来，您可以通过无数种其他编程的方式将DG-LAB设备参与到您自己的娱乐场景中去.
> 开源蓝牙协议旨在让DG-LAB爱好者更加自由的使用设备，未经授权请勿将本内容用以任何商业用途,如有需要,请[联系我们](https://www.dungeon-lab.com)

## 郊狼情趣电击器
### 蓝牙协议
|  服务UUID | 特性UUID  | 属性  | 名称  | 大小(BYTE)  |
| :------------: | :------------: | :------------: | :------------: | :------------: |
|  0x180A | 0x1500  | 读/通知  | Battery_Level  | 1字节  |
| 0x180B  | 0x1504  | 读/写/通知  | 	PWM_AB2  | 3字节  |
|  0x180B | 0x1505  | 读/写  | PWM_A34  | 3字节  |
|  0x180B | 0x1506  | 读/写  | PWM_B34  | 3字节  |

|  名称 | 说明  |  通信数据定义 |
| :------------: | :------------: | :------------: |
| Battery_Level  | 设备当前电量 | 1byte(整数0-100)|
|  PWM_AB2 | AB两通道强度  | 23-22bit(保留)	21-11bit(B通道实际强度)	10-0bit(A通道实际强度)  |
| PWM_A34  | A通道波形数据  | 23-20bit(保留)	19-15bit(Az)	14-5bit(Ay)	4-0bit(Ax)  |
| PWM_B34  | B通道波形数据  | 23-20bit(保留)	19-15bit(Bz)	14-5bit(By)	4-0bit(Bx)  |

> 基础UUID: 955Axxxx-0FE2-F5AA-A094-84B8D4F3E8AD

### 基本原理
郊狼内置了两组独立的脉冲生成模块，分别对应A，B两个通道。每组脉冲生成模块又由电源模块和波形控制模块两部分构成。我们通过蓝牙协议中的S,X,Y,Z四个变量来控制脉冲生成模块
- 电源模块(S)<br/>
S:[PWM_AB2特性]()<br/>
电源模块控制脉冲的电压，也就是通道的强度（App界面中圆环内的数字)，对应蓝牙协议中的参数S，范围是【0-2047】（不能超过2047）。在我们的APP中每增加一点强度是增加7(电击器中设置的实际强度值为APP中显示值的7倍)。当我们向APP内写入不同的参数S的值时，通道强度会立刻改变并且一直保持。
- 波形控制模块(X Y Z)<br/>
X:[PWM_A34或PWM_B34中4-0bit的5bits数据]()<br/>
Y:[PWM_A34或PWM_B34中14-5的10bits数据]()<br/>
Z:[PWM_A34或PWM_B34中19-15的5bits数据]()<br/>
波形控制模块控制脉冲出现的规律以及脉冲宽度的变化。脉冲出现的规律和脉冲宽度的变化被以内置波形或者自定义波形的形式保存下来。
